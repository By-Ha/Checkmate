"use strict";
// $(() => {

let nick = "";
let roomName = "";
let User;
let colorNick = [];
let myColor;
let movementUploader;
let init = false;
let start = false;

let size = 20;
const color = ['grey', 'blue', 'red', 'green', 'orange', 'pink', 'purple', 'chocolate', 'maroon'];
let gameData;
let playerInfo = [];
let gm = [];
let player = [];
let round;
let isThirdPerson = false;
let halfTag = false;
let scrollSize = 30;

function makeBoard() {
    let m = document.getElementById("m");
    m.innerHTML = "";
    var str = "";
    str += "<tbody>";
    for (var i = 1; i <= size; ++i) {
        str += "<tr >";
        for (var j = 1; j <= size; ++j) {
            str += "<td id=\"td-" + ((i - 1) * size + j) + "\">" + String((i - 1) * size + j) + "</td>";
        }
        str += "</tr>";
    }
    str += "</tbody>";
    $(m).append(str);
    for (var i = 1; i <= size; ++i) {
        for (var j = 1; j <= size; ++j) {
            $("#td-" + String((i - 1) * size + j))[0].onclick = function () {
                var id = Number(this.id.substr(3));
                var ln = Math.floor((id - 1) / size) + 1, col = Number((((id % size) == 0) ? size : (id % size)));
                if (gm[ln][col].color == myColor) {
                    makeSelect(ln, col);
                }
            }
        }
    }
}

function reloadSymbol(i, j) {
    let c = "";
    if (gm[i][j].type == 1) {//crown
        if (c.indexOf("crown.png") != -1) return;
        if (!start || judgeShown(i, j))
            $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/crown.png')");
    } else if (gm[i][j].type == 3) {//city
        if (c.indexOf("city.png") != -1 || c.indexOf("obstacle.png") != -1) return;
        if (!start || judgeShown(i, j))
            $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/city.png')");
        else $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/obstacle.png')");
    } else if (gm[i][j].type == 4) {//mountain
        if (c.indexOf("mountain.png") != -1 || c.indexOf("obstacle.png") != -1) return;
        if (!start || judgeShown(i, j))
            $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/mountain.png')");
        else $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/obstacle.png')");
    } else if (gm[i][j].type == 5) {//empty city
        if (c.indexOf("city.png") != -1 || c.indexOf("obstacle.png") != -1) return;
        if (!start || judgeShown(i, j))
            $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/city.png')");
        else $("#td-" + String((i - 1) * size + j)).css('background-image', c + "url('/img/obstacle.png')");
    }
}

function addAmountCrown() {
    for (var i = 1; i <= size; ++i) {
        for (var j = 1; j <= size; ++j) {
            if (gm[i][j].type == 1) {
                gm[i][j].amount++;
            }
        }
    }
}
function addAmountCity() {
    for (var i = 1; i <= size; ++i) {
        for (var j = 1; j <= size; ++j) {
            if (gm[i][j].type == 3)
                gm[i][j].amount++;
        }
    }
}
function addAmountRoad() {
    for (var i = 1; i <= size; ++i) {
        for (var j = 1; j <= size; ++j) {
            if (gm[i][j].type == 2 && gm[i][j].color && gm[i][j].amount > 0)
                gm[i][j].amount++;
        }
    }
}

function combineBlock(f, t, cnt) {
    if (t.color == f.color) { //same color means combine
        t.amount += cnt;
        f.amount -= cnt;
    } else { // not same color need to do delete
        t.amount -= cnt;
        f.amount -= cnt;
        if (t.amount < 0) { // t was cleared
            if (t.type == 1) { // t was player's crown and the player was killed
                var tcolor = t.color;
                for (var i = 1; i <= size; ++i) {
                    for (var j = 1; j <= size; ++j) {
                        if (gm[i][j].color == tcolor) {
                            gm[i][j].color = f.color;
                            if (gm[i][j].type == 1) {
                                gm[i][j].type = 3; // to a city
                            }
                        }
                    }
                }
            } else if (t.type == 5) { // trans to city 
                t.type = 3;
            } else if (t.type != 3) { // trans to road
                t.type = 2;
            }
            t.color = f.color;
            t.amount = -t.amount;
        }
    }
}

function illu() {
    playerInfo = [];// 12%
    let doc = document;
    for (let t1 = 1; t1 <= size; ++t1) {
        for (let t2 = 1; t2 <= size; ++t2) {
            let i = t1, j = t2;
            if (gm == 0) return;
            if (gm[i][j].color != 0) {
                if (playerInfo[gm[i][j].color] == undefined) playerInfo[gm[i][j].color] = [0, 0, 0];
                playerInfo[gm[i][j].color][0] += 1;
                playerInfo[gm[i][j].color][1] += gm[i][j].amount;
                playerInfo[gm[i][j].color][2] = gm[i][j].color;
            }
            let d = doc.getElementById("td-" + String((i - 1) * size + j));
            d.classList = "";
            d.innerHTML = (gm[i][j].amount == 0) ? " " : gm[i][j].amount;
            d.classList.add("shown");
            d.classList.add(color[gm[i][j].color]);
        }
    }
    for (let t1 = 1; t1 <= size; ++t1) {
        for (let t2 = 1; t2 <= size; ++t2) {
            reloadSymbol(t1, t2);
        }
    }
}

function getData(data) {
    gameData = JSON.parse(data);
    round = 0;
    player = gameData[0][0][0].player;
    gm = gameData[0];
    size = gm[0][0].size;
    makeBoard();
    illu();
}

function next() {
    ++round;
    if (round % 10 == 0) addAmountRoad();
    addAmountCity(), addAmountCrown();
    if (gameData[round] == undefined) return;
    else {
        for (var i in gameData[round]) {
            let mv = gameData[round][i];
            if (mv[0] == undefined) continue;
            let f = gm[mv[0]][mv[1]], t = gm[mv[2]][mv[3]];
            if (f.color == 0 || f.color != player[i].color) continue;
            combineBlock(f, t, ((mv[4] == 1) ? (Math.ceil((f.amount + 0.5) / 2)) : f.amount) - 1);
        }
    }
    illu();
}

getData(`[[[{"size":20,"player":{"2":{"uname":"By_Ha","prepare":false,"gaming":true,"connect":true,"color":1,"movement":[]},"105":{"uname":"云浅知处","prepare":false,"gaming":true,"connect":true,"color":2,"movement":[]},"284":{"uname":"_珂朵莉","prepare":false,"gaming":true,"connect":true,"color":3,"movement":[]}},"version":1},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":49},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":46},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":48},{"color":0,"type":4,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":5,"amount":43},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":44},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":3,"type":1,"amount":1},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":46},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":44},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":43},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":49}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":50},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":44},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":42},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":43},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":41}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":48},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":5,"amount":50},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":2,"type":1,"amount":1},{"color":0,"type":5,"amount":41},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":50},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":5,"amount":41},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":47},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":42},{"color":0,"type":4,"amount":0},{"color":1,"type":1,"amount":1},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":45},{"color":0,"type":5,"amount":43},{"color":0,"type":5,"amount":47},{"color":0,"type":5,"amount":46},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":43},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":43},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":46},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":5,"amount":42},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":5,"amount":44},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":50},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":49},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0}],[{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":49},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":5,"amount":44},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":0,"amount":0},{"color":0,"type":4,"amount":0}]],{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[4,9,3,9,0],"105":[],"284":[]},{"2":[4,9,3,9,0],"105":[],"284":[]},{"2":[4,9,3,9,0],"105":[],"284":[]},{"2":[12,19,11,19,0],"105":[],"284":[]},{"2":[11,19,11,18,0],"105":[],"284":[]},{"2":[11,18,11,17,0],"105":[],"284":[]},{"2":[11,17,11,16,0],"105":[11,4,12,4,0],"284":[]},{"2":[11,16,11,15,0],"105":[11,4,12,4,0],"284":[]},{"2":[11,15,11,14,0],"105":[11,4,11,3,0],"284":[]},{"2":[11,14,11,13,0],"105":[11,4,11,3,0],"284":[]},{"2":[11,13,11,12,0],"105":[11,3,10,3,0],"284":[]},{"2":[12,19,13,19,0],"105":[11,3,10,3,0],"284":[]},{"2":[13,19,14,19,0],"105":[11,3,10,3,0],"284":[]},{"2":[14,19,15,19,0],"105":[11,3,10,3,0],"284":[]},{"2":[15,19,16,19,0],"105":[11,3,10,3,0],"284":[]},{"2":[16,19,16,20,0],"105":[10,3,11,3,0],"284":[]},{"2":[16,20,17,20,0],"105":[11,3,12,3,0],"284":[]},{"2":[17,20,18,20,0],"105":[11,3,12,3,0],"284":[]},{"2":[18,20,19,20,0],"105":[11,3,12,3,0],"284":[]},{"2":[],"105":[12,3,12,4,0],"284":[]},{"2":[14,19,14,20,0],"105":[12,4,11,4,0],"284":[]},{"2":[],"105":[12,4,11,4,0],"284":[]},{"2":[13,19,13,20,0],"105":[11,4,11,3,0],"284":[]},{"2":[12,19,12,20,0],"105":[11,4,11,3,0],"284":[]},{"2":[12,19,12,20,0],"105":[11,3,11,2,0],"284":[]},{"2":[11,19,10,19,0],"105":[11,3,11,2,0],"284":[]},{"2":[11,19,10,19,0],"105":[11,3,11,2,0],"284":[]},{"2":[9,19,9,18,0],"105":[11,2,10,2,0],"284":[]},{"2":[9,19,9,18,0],"105":[11,2,10,2,0],"284":[]},{"2":[9,19,9,18,0],"105":[10,2,10,1,0],"284":[]},{"2":[9,19,9,18,0],"105":[10,2,10,1,0],"284":[]},{"2":[12,20,11,20,0],"105":[10,1,10,2,0],"284":[]},{"2":[11,20,11,19,0],"105":[10,1,10,2,0],"284":[]},{"2":[11,19,11,18,0],"105":[10,1,10,2,0],"284":[]},{"2":[11,18,11,17,0],"105":[10,1,10,2,0],"284":[]},{"2":[11,17,11,16,0],"105":[10,1,10,2,0],"284":[]},{"2":[11,16,12,16,0],"105":[10,1,10,2,0],"284":[]},{"2":[12,16,11,16,0],"105":[10,2,10,3,0],"284":[]},{"2":[11,16,11,17,0],"105":[10,2,10,3,0],"284":[]},{"2":[11,17,10,17,0],"105":[10,2,10,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[10,17,11,17,0],"105":[10,3,11,3,0],"284":[]},{"2":[11,17,12,17,0],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[12,19,11,19,0],"105":[10,3,11,3,0],"284":[]},{"2":[11,19,11,18,0],"105":[10,3,11,3,0],"284":[]},{"2":[11,18,11,17,0],"105":[10,3,11,3,0],"284":[]},{"2":[11,17,12,17,0],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[],"105":[10,3,11,3,0],"284":[]},{"2":[11,13,11,14,0],"105":[10,3,11,3,0],"284":[]},{"2":[11,14,11,15,0],"105":[],"284":[]},{"2":[11,15,11,16,0],"105":[],"284":[]},{"2":[11,16,12,16,0],"105":[],"284":[]},{"2":[12,16,12,17,0],"105":[],"284":[]},{"2":[12,16,12,17,0],"105":[],"284":[]},{"2":[12,16,12,17,0],"105":[],"284":[]},{"2":[12,17,12,16,0],"105":[],"284":[]},{"2":[12,16,13,16,0],"105":[],"284":[]},{"2":[12,16,13,16,0],"105":[],"284":[]},{"2":[13,16,14,16,0],"105":[],"284":[]},{"2":[14,16,15,16,0],"105":[],"284":[]},{"2":[15,16,16,16,0],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[14,19,14,18,0],"105":[],"284":[]},{"2":[14,18,14,19,0],"105":[],"284":[]},{"2":[14,19,15,19,0],"105":[],"284":[]},{"2":[15,19,16,19,0],"105":[],"284":[]},{"2":[16,19,16,20,0],"105":[],"284":[]},{"2":[16,20,15,20,0],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[15,20,16,20,0],"105":[],"284":[]},{"2":[16,20,16,19,0],"105":[],"284":[]},{"2":[16,19,16,18,0],"105":[],"284":[]},{"2":[16,18,17,18,0],"105":[],"284":[]},{"2":[16,18,17,18,0],"105":[],"284":[]},{"2":[16,18,17,18,0],"105":[],"284":[]},{"2":[17,18,17,17,0],"105":[],"284":[]},{"2":[17,17,18,17,0],"105":[],"284":[]},{"2":[17,17,18,17,0],"105":[],"284":[]},{"2":[18,17,17,17,0],"105":[],"284":[]},{"2":[18,17,17,17,0],"105":[],"284":[]},{"2":[17,17,17,16,0],"105":[],"284":[]},{"2":[17,17,17,16,0],"105":[],"284":[]},{"2":[17,17,17,16,0],"105":[],"284":[]},{"2":[16,16,17,16,0],"105":[],"284":[]},{"2":[16,16,17,16,0],"105":[],"284":[]},{"2":[12,17,12,16,0],"105":[],"284":[]},{"2":[12,16,13,16,0],"105":[],"284":[]},{"2":[13,16,14,16,0],"105":[],"284":[]},{"2":[14,16,15,16,0],"105":[],"284":[]},{"2":[15,16,16,16,0],"105":[],"284":[]},{"2":[16,16,17,16,0],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[],"105":[],"284":[]},{"2":[17,16,17,17,0],"105":[11,3,12,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[11,3,12,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[11,3,12,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[11,3,12,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[12,3,13,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[12,3,13,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[13,3,13,2,0],"284":[]},{"2":[19,20,19,19,0],"105":[],"284":[]},{"2":[19,19,19,18,0],"105":[],"284":[]},{"2":[19,18,20,18,0],"105":[],"284":[]},{"2":[20,18,20,17,0],"105":[],"284":[]},{"2":[20,17,20,16,0],"105":[],"284":[]},{"2":[20,17,20,16,0],"105":[],"284":[]},{"2":[20,17,20,16,0],"105":[],"284":[]},{"2":[19,19,20,19,0],"105":[13,2,13,3,0],"284":[]},{"2":[19,19,20,19,0],"105":[13,2,13,3,0],"284":[]},{"2":[19,19,20,19,0],"105":[13,2,13,3,0],"284":[]},{"2":[19,19,20,19,0],"105":[13,2,13,3,0],"284":[]},{"2":[20,16,19,16,0],"105":[13,2,13,3,0],"284":[]},{"2":[],"105":[13,2,13,3,0],"284":[]},{"2":[],"105":[13,2,13,3,0],"284":[]},{"2":[17,16,17,17,0],"105":[13,2,13,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[13,2,13,3,0],"284":[]},{"2":[18,17,19,17,0],"105":[13,2,13,3,0],"284":[]},{"2":[],"105":[13,2,13,3,0],"284":[]},{"2":[],"105":[11,4,12,4,0],"284":[]},{"2":[],"105":[12,4,12,5,0],"284":[]},{"2":[17,16,17,17,0],"105":[12,4,12,5,0],"284":[]},{"2":[17,17,18,17,0],"105":[12,5,11,5,0],"284":[]},{"2":[18,17,19,17,0],"105":[12,5,11,5,0],"284":[]},{"2":[18,17,19,17,0],"105":[11,5,11,4,0],"284":[]},{"2":[],"105":[11,5,11,4,0],"284":[]},{"2":[12,17,12,16,0],"105":[11,4,11,3,0],"284":[]},{"2":[12,16,11,16,0],"105":[11,4,11,3,0],"284":[]},{"2":[11,16,10,16,0],"105":[11,3,11,2,0],"284":[]},{"2":[11,16,10,16,0],"105":[11,3,11,2,0],"284":[]},{"2":[11,17,10,17,0],"105":[11,3,11,2,0],"284":[]},{"2":[10,17,10,16,0],"105":[11,2,12,2,0],"284":[]},{"2":[10,16,9,16,0],"105":[],"284":[]},{"2":[10,16,9,16,0],"105":[12,2,11,2,0],"284":[]},{"2":[],"105":[12,2,11,2,0],"284":[]},{"2":[],"105":[11,2,10,2,0],"284":[]},{"2":[],"105":[11,2,10,2,0],"284":[]},{"2":[],"105":[10,2,10,3,0],"284":[]},{"2":[17,16,17,17,0],"105":[10,2,10,3,0],"284":[]},{"2":[17,17,18,17,0],"105":[10,2,10,3,0],"284":[]},{"2":[18,17,19,17,0],"105":[10,3,9,3,0],"284":[]},{"2":[19,17,20,17,0],"105":[10,3,9,3,0],"284":[]},{"2":[],"105":[10,3,9,3,0],"284":[]},{"2":[20,17,20,16,0],"105":[10,3,9,3,0],"284":[]},{"2":[20,16,20,15,0],"105":[10,3,9,3,0],"284":[]},{"2":[20,15,19,15,0],"105":[],"284":[]},{"2":[20,15,19,15,0],"105":[],"284":[]},{"2":[20,15,19,15,0],"105":[],"284":[]},{"2":[20,15,19,15,0],"105":[],"284":[]},{"2":[19,16,19,15,0],"105":[],"284":[]},{"2":[19,16,19,15,0],"105":[],"284":[]},{"2":[17,16,17,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[17,15,18,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[13,16,14,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[14,16,15,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[15,16,16,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[16,16,17,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[17,16,17,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[17,15,18,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[18,15,19,15,0],"105":[9,3,8,3,0],"284":[]},{"2":[],"105":[9,3,8,3,0],"284":[]},{"2":[],"105":[9,3,8,3,0],"284":[]},{"2":[12,17,11,17,0],"105":[9,3,8,3,0],"284":[]},{"2":[11,17,10,17,0],"105":[9,3,8,3,0],"284":[]},{"2":[11,17,10,17,0],"105":[9,3,8,3,0],"284":[]},{"2":[10,17,10,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[10,16,9,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[10,16,9,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[],"105":[9,3,8,3,0],"284":[]},{"2":[9,16,10,16,0],"105":[9,3,8,3,0],"284":[]},{"2":[10,16,10,17,0],"105":[9,3,8,3,0],"284":[]},{"2":[10,16,10,17,0],"105":[9,3,8,3,0],"284":[6,10,7,10,0]},{"2":[10,17,11,17,0],"105":[9,3,8,3,0],"284":[6,10,7,10,0]},{"2":[11,17,11,18,0],"105":[9,3,8,3,0],"284":[]},{"2":[11,18,11,19,0],"105":[9,3,8,3,0],"284":[6,10,7,10,0]},{"2":[11,19,11,20,0],"105":[9,3,8,3,0],"284":[]},{"2":[11,20,10,20,0],"105":[9,3,8,3,0],"284":[7,10,6,10,0]},{"2":[10,20,9,20,0],"105":[9,3,8,3,0],"284":[]},{"2":[9,20,9,19,0],"105":[9,3,8,3,0],"284":[]},{"2":[9,20,9,19,0],"105":[],"284":[6,10,5,10,0]},{"2":[9,19,9,18,0],"105":[],"284":[]},{"2":[9,18,9,19,0],"105":[],"284":[5,10,5,9,0]},{"2":[9,19,9,20,0],"105":[],"284":[5,10,5,9,0]},{"2":[9,20,8,20,0],"105":[],"284":[5,10,5,9,0]},{"2":[],"105":[],"284":[5,9,5,8,0]},{"2":[],"105":[],"284":[5,9,5,8,0]},{"2":[8,20,7,20,0],"105":[],"284":[5,8,4,8,0]},{"2":[7,20,7,19,0],"105":[],"284":[5,8,4,8,0]},{"2":[7,20,7,19,0],"105":[],"284":[4,8,4,9,0]},{"2":[7,20,7,19,0],"105":[],"284":[4,8,4,9,0]},{"2":[7,20,7,19,0],"105":[],"284":[4,9,5,9,0]},{"2":[7,20,7,19,0],"105":[],"284":[4,9,5,9,0]},{"2":[7,20,7,19,0],"105":[],"284":[5,9,6,9,0]},{"2":[9,16,10,16,0],"105":[],"284":[5,9,6,9,0]},{"2":[10,16,10,17,0],"105":[],"284":[6,9,7,9,0]},{"2":[10,16,10,17,0],"105":[],"284":[6,9,7,9,0]},{"2":[10,17,11,17,0],"105":[],"284":[6,9,7,9,0]},{"2":[11,17,11,18,0],"105":[],"284":[7,9,8,9,0]},{"2":[11,18,11,19,0],"105":[],"284":[7,9,8,9,0]},{"2":[11,19,11,20,0],"105":[],"284":[8,9,7,9,0]},{"2":[11,20,10,20,0],"105":[],"284":[8,9,7,9,0]},{"2":[10,20,9,20,0],"105":[],"284":[7,9,7,10,0]},{"2":[10,20,9,20,0],"105":[],"284":[7,10,6,10,0]},{"2":[9,20,8,20,0],"105":[],"284":[7,10,6,10,0]},{"2":[9,20,8,20,0],"105":[],"284":[]},{"2":[],"105":[],"284":[6,10,6,9,0]},{"2":[],"105":[],"284":[6,10,6,9,0]},{"2":[8,20,7,20,0],"105":[],"284":[6,10,6,9,0]},{"2":[],"105":[],"284":[6,9,6,8,0]},{"2":[],"105":[],"284":[6,9,6,8,0]},{"2":[],"105":[],"284":[6,8,7,8,0]},{"2":[],"105":[],"284":[6,8,7,8,0]},{"2":[],"105":[],"284":[6,8,7,8,0]},{"2":[],"105":[],"284":[6,8,7,8,0]},{"2":[17,16,17,15,0],"105":[],"284":[6,8,7,8,0]},{"2":[17,15,16,15,0],"105":[],"284":[6,8,7,8,0]},{"2":[16,15,15,15,0],"105":[],"284":[6,8,7,8,0]},{"2":[15,15,14,15,0],"105":[],"284":[6,8,7,8,0]},{"2":[14,15,14,14,0],"284":[6,8,7,8,0]},{"2":[14,14,13,14,0],"284":[]},{"2":[13,14,12,14,0],"284":[]},{"2":[13,14,12,14,0],"284":[]},{"2":[12,14,12,13,0],"284":[]},{"2":[12,14,12,13,0],"284":[]},{"2":[12,14,12,13,0],"284":[]},{"2":[12,14,12,13,0],"284":[]},{"2":[12,13,12,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[11,12,12,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[],"284":[]},{"2":[],"284":[]},{"2":[11,14,11,13,0],"284":[]},{"2":[11,13,11,12,0],"284":[]},{"2":[11,12,12,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[14,12,15,12,0],"284":[]},{"2":[14,12,15,12,0],"284":[]},{"2":[14,12,15,12,0],"284":[]},{"2":[14,12,15,12,0],"284":[]},{"2":[12,13,12,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[13,12,14,12,0],"284":[]},{"2":[14,12,15,12,0],"284":[]},{"2":[15,12,16,12,0],"284":[]},{"2":[16,12,17,12,0],"284":[]},{"2":[17,12,18,12,0],"284":[]},{"2":[18,12,19,12,0],"284":[]},{"2":[19,12,20,12,0],"284":[]},{"2":[20,15,20,14,0],"284":[7,10,7,9,0]},{"2":[20,14,20,13,0],"284":[7,10,7,9,0]},{"2":[20,13,20,12,0],"284":[]},{"2":[19,15,19,14,0],"284":[7,10,7,9,0]},{"2":[19,14,19,13,0],"284":[7,9,7,8,0]},{"2":[19,13,19,12,0],"284":[7,9,7,8,0]},{"2":[18,15,18,14,0],"284":[7,9,7,8,0]},{"2":[18,14,18,13,0],"284":[7,9,7,8,0]},{"2":[18,13,18,12,0],"284":[7,9,7,8,0]},{"2":[17,15,17,14,0],"284":[7,8,8,8,0]},{"2":[17,14,17,13,0],"284":[]},{"2":[17,13,17,12,0],"284":[]},{"2":[],"284":[8,8,8,7,0]},{"2":[15,15,15,14,0],"284":[8,8,8,7,0]},{"2":[15,14,15,13,0],"284":[8,8,8,7,0]},{"2":[15,13,15,12,0],"284":[8,7,8,6,0]},{"2":[14,14,14,13,0],"284":[8,7,8,6,0]},{"2":[14,13,15,13,0],"284":[8,7,8,6,0]},{"2":[15,13,16,13,0],"284":[8,6,9,6,0]},{"2":[15,13,16,13,0],"284":[8,6,9,6,0]},{"2":[15,13,16,13,0],"284":[8,6,9,6,0]},{"2":[16,13,15,13,0],"284":[9,6,10,6,0]},{"2":[16,13,15,13,0],"284":[9,6,10,6,0]},{"2":[14,13,14,12,0],"284":[10,6,11,6,0]},{"2":[14,13,14,12,0],"284":[10,6,11,6,0]},{"2":[14,13,14,12,0],"284":[10,6,11,6,0]},{"2":[14,13,14,12,0],"284":[10,6,11,6,0]},{"2":[19,12,18,12,0],"284":[10,6,11,6,0]},{"2":[18,12,17,12,0],"284":[]},{"2":[17,12,16,12,0],"284":[]},{"2":[16,12,15,12,0],"284":[]},{"2":[15,12,14,12,0],"284":[]},{"2":[],"284":[]},{"2":[14,12,14,11,0],"284":[]},{"2":[],"284":[]},{"2":[],"284":[]},{"2":[14,11,13,11,0],"284":[]},{"2":[13,11,12,11,0],"284":[]},{"2":[12,11,11,11,0],"284":[]},{"2":[11,11,11,12,0],"284":[]},{"2":[11,12,11,13,0],"284":[]},{"2":[],"284":[]},{"2":[11,13,10,13,0],"284":[]},{"2":[10,13,10,14,0],"284":[]},{"2":[10,14,11,14,0],"284":[]},{"2":[10,14,11,14,0],"284":[]},{"2":[11,14,11,13,0],"284":[]},{"2":[11,13,11,12,0],"284":[]},{"2":[11,12,12,12,0],"284":[]},{"2":[12,12,13,12,0],"284":[]},{"2":[13,12,14,12,0],"284":[]},{"2":[14,12,14,11,0],"284":[]},{"2":[14,11,15,11,0],"284":[]},{"2":[15,11,16,11,0],"284":[]},{"2":[16,11,17,11,0],"284":[]},{"2":[17,11,18,11,0],"284":[]},{"2":[18,11,19,11,0],"284":[]},{"2":[19,11,20,11,0],"284":[]},{"2":[20,11,20,12,0],"284":[]},{"2":[20,12,20,13,0],"284":[6,10,7,10,0]},{"2":[20,13,20,14,0],"284":[6,10,7,10,0]},{"2":[20,14,20,15,0],"284":[6,10,7,10,0]},{"2":[20,15,20,16,0],"284":[]},{"2":[20,16,20,17,0],"284":[7,10,7,9,0]},{"2":[20,17,20,18,0],"284":[7,9,7,8,0]},{"2":[20,18,20,19,0],"284":[]},{"2":[20,19,19,19,0],"284":[]},{"2":[19,19,19,20,0],"284":[]},{"2":[19,20,18,20,0],"284":[7,9,7,8,0]},{"2":[18,20,17,20,0],"284":[]},{"2":[17,20,16,20,0],"284":[]},{"2":[16,20,15,20,0],"284":[]},{"2":[15,20,14,20,0],"284":[7,8,8,8,0]},{"2":[14,20,13,20,0],"284":[7,8,8,8,0]},{"2":[13,20,12,20,0],"284":[]},{"2":[12,20,11,20,0],"284":[]},{"2":[11,20,10,20,0],"284":[]},{"2":[10,20,9,20,0],"284":[8,8,8,7,0]},{"2":[9,20,8,20,0],"284":[]},{"2":[8,20,7,20,0],"284":[]},{"2":[7,20,6,20,0],"284":[]},{"2":[6,20,5,20,0],"284":[8,7,8,6,0]},{"2":[6,20,5,20,0],"284":[]},{"2":[5,20,5,19,0],"284":[8,6,9,6,0]},{"2":[],"284":[]},{"2":[5,19,4,19,0],"284":[8,6,9,6,0]},{"2":[4,19,3,19,0],"284":[9,6,10,6,0]},{"2":[],"284":[]},{"2":[],"284":[9,6,10,6,0]},{"2":[3,19,4,19,0],"284":[10,6,11,6,0]},{"2":[4,19,4,18,0],"284":[]},{"2":[4,18,3,18,0],"284":[]},{"2":[3,18,4,18,0],"284":[]},{"2":[4,18,5,18,0],"284":[]},{"2":[5,18,6,18,0],"284":[]},{"2":[5,18,6,18,0],"284":[11,6,12,6,0]},{"2":[6,18,7,18,0],"284":[11,6,12,6,0]},{"2":[7,18,7,19,0],"284":[11,6,12,6,0]},{"2":[7,19,7,18,0],"284":[11,6,12,6,0]},{"2":[7,18,7,17,0],"284":[12,6,11,6,0]},{"2":[7,17,7,16,0],"284":[12,6,11,6,0]},{"2":[7,17,7,16,0],"284":[12,6,11,6,0]},{"2":[7,16,7,17,0],"284":[12,6,11,6,0]},{"2":[7,17,8,17,0],"284":[12,6,11,6,0]},{"2":[8,17,7,17,0],"284":[11,6,11,5,0]},{"2":[7,17,6,17,0],"284":[11,6,11,5,0]},{"2":[6,17,5,17,0],"284":[11,6,11,5,0]},{"2":[5,17,4,17,0],"284":[11,6,11,5,0]},{"2":[4,17,4,16,0],"284":[]},{"2":[4,16,3,16,0],"284":[]},{"2":[],"284":[]},{"2":[3,16,3,15,0],"284":[]},{"2":[3,15,2,15,0],"284":[]},{"2":[2,15,1,15,0],"284":[]},{"2":[1,15,1,16,0],"284":[11,5,11,4,0]},{"2":[1,16,1,17,0],"284":[]},{"2":[1,17,2,17,0],"284":[]},{"2":[1,17,2,17,0],"284":[]},{"2":[2,17,1,17,0],"284":[]},{"2":[1,17,1,18,0],"284":[11,5,11,4,0]},{"2":[1,17,1,18,0],"284":[8,9,8,8,0]},{"2":[1,18,1,17,0],"284":[]},{"2":[1,17,1,16,0],"284":[]},{"2":[1,16,1,15,0],"284":[]},{"2":[1,15,2,15,0],"284":[8,8,8,7,0]},{"2":[2,15,3,15,0],"284":[]},{"2":[3,15,4,15,0],"284":[]},{"2":[4,15,5,15,0],"284":[]},{"2":[5,15,6,15,0],"284":[8,8,8,7,0]},{"2":[6,15,6,16,0],"284":[8,7,8,6,0]},{"2":[6,16,5,16,0],"284":[]},{"2":[5,16,4,16,0],"284":[8,7,8,6,0]},{"2":[],"284":[8,7,8,6,0]},{"2":[4,16,5,16,0],"284":[]},{"2":[5,16,5,15,0],"284":[8,6,9,6,0]},{"2":[5,15,5,14,0],"284":[]},{"2":[5,14,6,14,0],"284":[]},{"2":[6,14,7,14,0],"284":[9,6,10,6,0]},{"2":[7,14,8,14,0],"284":[]},{"2":[8,14,8,15,0],"284":[9,6,10,6,0]},{"2":[8,15,9,15,0],"284":[9,6,10,6,0]},{"2":[],"284":[9,6,10,6,0]},{"2":[9,15,8,15,0],"284":[9,6,10,6,0]},{"2":[8,15,8,14,0],"284":[9,6,10,6,0]},{"2":[8,14,9,14,0],"284":[9,6,10,6,0]},{"2":[9,14,9,13,0],"284":[10,6,11,6,0]},{"2":[9,13,8,13,0],"284":[10,6,11,6,0]},{"2":[8,13,7,13,0],"284":[10,6,11,6,0]},{"2":[7,13,6,13,0],"284":[]},{"2":[6,13,6,14,0],"284":[]},{"2":[6,14,5,14,0],"284":[]},{"2":[5,14,4,14,0],"284":[11,6,12,6,0]},{"2":[5,14,4,14,0],"284":[]},{"2":[4,14,4,15,0],"284":[]},{"2":[4,15,3,15,0],"284":[]},{"2":[3,15,2,15,0],"284":[12,6,12,5,0]},{"2":[2,15,2,14,0],"284":[]},{"2":[2,14,2,15,0],"284":[]},{"2":[2,15,3,15,0],"284":[]},{"2":[3,15,4,15,0],"284":[]},{"2":[4,15,4,14,0],"284":[]},{"2":[4,14,4,13,0],"284":[12,5,12,4,0]},{"2":[4,13,3,13,0],"284":[]},{"2":[3,13,2,13,0],"284":[]},{"2":[2,13,1,13,0],"284":[]},{"2":[1,13,2,13,0],"284":[]},{"2":[2,13,3,13,0],"284":[12,4,11,4,0]},{"2":[3,13,4,13,0],"284":[]},{"2":[4,13,3,13,0],"284":[]},{"2":[3,13,3,12,0],"284":[]},{"2":[3,13,3,12,0],"284":[]},{"2":[3,12,3,11,0],"284":[]},{"2":[3,11,4,11,0],"284":[]},{"2":[4,11,5,11,0],"284":[]},{"2":[4,11,5,11,0],"284":[]},{"2":[5,11,4,11,0],"284":[]},{"2":[4,11,3,11,0],"284":[]},{"2":[4,11,3,11,0],"284":[]},{"2":[3,11,4,11,0],"284":[]},{"2":[4,11,5,11,0],"284":[]},{"2":[5,11,5,10,0],"284":[]},{"2":[5,10,6,10,0]}]`);


$(document).ready(() => {
    //兼容性写法，该函数也是网上别人写的，不过找不到出处了，蛮好的，所有我也没有必要修改了
    //判断鼠标滚轮滚动方向
    if (window.addEventListener)//FF,火狐浏览器会识别该方法
        window.addEventListener('DOMMouseScroll', wheel, false);
    window.onmousewheel = document.onmousewheel = wheel;//W3C
    //统一处理滚轮滚动事件
    function wheel(event) {
        var delta = 0;
        if (!event) event = window.event;
        if (event.wheelDelta) {//IE、chrome浏览器使用的是wheelDelta，并且值为“正负120”
            delta = event.wheelDelta / 120;
            if (window.opera) delta = -delta;//因为IE、chrome等向下滚动是负值，FF是正值，为了处理一致性，在此取反处理
        } else if (event.detail) {//FF浏览器使用的是detail,其值为“正负3”
            delta = -event.detail / 3;
        }
        if (delta)
            handle(delta);
    }
    //上下滚动时的具体处理函数
    function handle(delta) {
        if (delta < 0) scrollSize /= 1.2; //向下滚动
        else scrollSize *= 1.2; //向上滚动
        if (scrollSize <= 20) { scrollSize *= 1.2; return; }
        else if (scrollSize >= 500) { scrollSize /= 1.2; return; }
        var str = "#m td{width: " + String(scrollSize) + "px;max-width: " + String(scrollSize) + "px;min-width: " + String(scrollSize) + "px;height: " + String(scrollSize) + "px;max-height: " + String(scrollSize) + "px;min-height: " + String(scrollSize) + "px;}";
        $("#font-size-control")[0].innerHTML = str;
        var t1 = Number($("#m").css('margin-left').substr(0, $("#m").css('margin-left').length - 2));
        var t2 = Number($("#m").css('margin-top').substr(0, $("#m").css('margin-top').length - 2));
        if (delta < 0) t1 /= 1.2, t2 /= 1.2;
        // else t1*=1.2,t2*=1.2;
        $(m).css('margin-left', t1 + "px");
        $(m).css('margin-top', t2 + "px");
    }
});

$(document).ready(() => {
    var box = document.getElementById('m');
    document.onmousedown = function (e) {
        if (!$(e.target).hasClass('unshown') && e.target.id != 'main') return;
        var tx = $(box).css('margin-left'); tx = Number(tx.substr(0, tx.length - 2));
        var ty = $(box).css('margin-top'); ty = Number(ty.substr(0, ty.length - 2));
        var disx = e.pageX;
        var disy = e.pageY;
        document.onmousemove = function (e) {
            box.style.marginLeft = e.pageX - disx + tx + 'px';
            box.style.marginTop = e.pageY - disy + ty + 'px';
        };
        document.onmouseup = function () {
            document.onmousemove = document.onmouseup = null;
        };
    }
});

// });